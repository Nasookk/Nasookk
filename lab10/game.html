<!DOCTYPE html>
<html lang="mn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–î“Ø“Ø–∂–∏–ª–¥—ç–≥ —Ç–æ–≥–ª–æ–æ–º</title>
  <style>
  body {
  font-family: sans-serif;
  text-align: center;
  margin-top: 50px;
  background: url('image.png');
  background-size: 1000px;
  color: #45a049;;
}

    h1 {
      font-size: 36px;
      margin-bottom: 20px;
    }
    #nicknameInput {
      margin-top: 20px;
    }
    #nicknameInput input {
      padding: 10px;
      font-size: 18px;
      width: 200px;
      border-radius: 5px;
      border: 2px solid #45a049;
      background-color: rgba(255, 254, 254, 0.902);
    }
    #nicknameInput button {
      padding: 10px;
      font-size: 18px;
      background-color: #45a049;
      color: rgb(255, 255, 255);
      border: none;
      border-radius: 5px;
      margin-top: 10px;
      cursor: pointer;
    }
    #nicknameInput button:hover {
      background-color: #45a049;
    }
    #gameArea {
      display: none;
      margin-top: 30px;
    }
    .letter-box {
      display: inline-block;
      width: 40px;
      height: 40px;
      border: 2px solid #000000;
      margin: 2px;
      font-size: 30px;
      line-height: 40px;
      color: #87cf97;
      background-color: rgba(255, 255, 255, 0.6);
    }
   
    .keyboard button:hover {
      background-color: rgba(255, 255, 255, 0.8);
    }
    #timer {
      font-size: 24px;
      margin: 20px 0;
    }

    #keyboard {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 20px;
    }
    .keyboard-row {
      display: flex;
      justify-content: center;
      margin-bottom: 5px;
    }
    .keyboard-row button {
      margin: 2px;
      padding: 10px 12px;
      font-size: 16px;
      background-color: rgba(255, 255, 255, 0.6);
      border: 2px solid #000000;
      color: #000000;
    }
    .keyboard-row button:hover {
      background-color: rgba(255, 255, 255, 0.8);
    }


    canvas {
      border: 1px solid #e6e2e2;
      margin-top: 20px;
    }
    .letter-box { display: inline-block; width: 40px; height: 40px; border: 2px solid #333; margin: 2px; font-size: 24px; line-height: 40px; }
    .keyboard button { margin: 5px; padding: 10px 15px; font-size: 18px; }
    #timer { font-size: 24px; margin: 20px 0; }
    #hint { font-size: 18px; color: #666; margin: 10px 0; }
    #keyboard {
      display: flex; flex-direction: column; align-items: center; margin-top: 20px;
    }
    .keyboard-row { display: flex; justify-content: center; margin-bottom: 5px; }
    .keyboard-row button { margin: 2px; padding: 10px 12px; font-size: 16px; }
    canvas { border: 1px solid #ccc; margin-top: 20px; }
    #gameOverModal, #top10Modal {
      display: none; position: fixed; top: 0; left: 0;
      width: 100%; height: 100%; background: rgba(0,0,0,0.7);
      justify-content: center; align-items: center;
    }
    .modal-content {
      background: white; padding: 30px;  margin-top: -450px; border-radius: 8px; text-align: center;
    }
    #scoreboardList li { font-size: 18px; text-align: left; }
    @media (max-width: 596px) {
  body {
    background-size: cover;
    font-size: 16px;
    margin: 0;
    padding: 10px;
  }

  h1 {
    font-size: 24px;
    text-align: center;
  }

  #nicknameInput input {
    width: 90%;
    font-size: 16px;
    padding: 10px ;
  }

  #nicknameInput button {
    font-size: 16px;
    padding: 8px;
    width: 100%;
  }

  #hint, #score, #timer {
    font-size: 18px;
    text-align: center;
    margin-bottom: 10px;
    margin-top: 10px;
  }
 #word{
  font-size: 18px;
    text-align: center;
    margin-bottom: 10px;
    margin-top: -5px;
 }
  .letter-box {
    width: 25px;
    height: 25px;
    font-size: 20px;
    margin: 2px;
    line-height: 18px;
   
  }

  .keyboard-row {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    margin-bottom: 10px;
  }

  .keyboard-row button {
    padding: 8px 7px;
    font-size: 14px;
    margin: 2px;
  }

  canvas {
    width: 250px !important;
    height: 300px !important;
    display: block;
    margin: 0 auto;
  }

  .modal-content {
    width: 90%;
    padding: 20px;
    font-size: 16px;
  }

  #gifContainer img {
    max-width: 100%;
    height: auto;
  }
}

  </style>
</head>
<body>
  <h1>–î“Ø“Ø–∂–∏–ª–∂ –∞–ª–≤–∞–ª —Ö–æ—Ö–∏–Ω —à“Ø“Ø</h1>



  <div id="nicknameInput">
    <input type="text" id="nickname" placeholder="–ù—ç—Ä—ç—ç –æ—Ä—É—É–ª–Ω–∞ —É—É" />
    <button onclick="startGame()">–≠—Ö–ª—ç—Ö</button>
  </div>


  <div id="gameArea" style="display:none;">
    <div id="hint"></div>
    <div id="word"></div>
    <div id="timer">–¶–∞–≥: 60</div>
    <div class="keyboard" id="keyboard"></div>
    <div id="score">–û–Ω–æ–æ: 0</div>
    <canvas id="hangmanCanvas" width="200" height="250"></canvas>
    <br><button onclick="showTop10()">TOP 10 —Ç–æ–≥–ª–æ–≥—á —Ö–∞—Ä–∞—Ö</button>
  </div>

  <div id="gameOverModal">
    <div class="modal-content">
      <h2>–¢–∞ —Ö–æ–∂–∏–≥–¥–ª–æ–æ!</h2>
         <p id="top5Message" style="display: none; color: green; font-weight: bold;">
  üéâ –¢–∞ —ç—Ö–Ω–∏–π 5-–¥ –æ—Ä—Å–æ–Ω –±–∞–π–Ω–∞!
</p>
      <img src="rain.gif" width="300" /><br>
      <p id="revealWord"></p>
   
      <button onclick="restartGame()">–î–∞—Ö–∏–Ω —Ç–æ–≥–ª–æ—Ö</button>
      <button onclick="exitGame()">–ì–∞—Ä–∞—Ö</button>
    </div>
  </div>

  <div id="top10Modal">
    <div class="modal-content">
      <h3>–®–∏–ª–¥—ç–≥ 10 —Ç–æ–≥–ª–æ–≥—á</h3>
      <ol id="scoreboardList"></ol>
      <button onclick="closeTop10()">–•–∞–∞—Ö</button>
    </div>
  </div>

  <script>
    const words = [
     { word: "–Ω–∞–º—Å—Ä–∞–π", hint: "–≠–¥ —Ö”©—Ä”©–Ω–≥–∏–π–Ω –±—É—Ä—Ö–∞–Ω" },
      { word: "—ç—Ö–Ω—ç—Ä", hint: "–£–≤—Å–∞–∞—Ä –≥—ç—Ä–∏–π–Ω —Ö“Ø–Ω –≥—ç–¥—ç–≥ “Ø–≥" },
      { word: "–º–æ—Ä—å", hint: "–•–∞–ª—É—É–Ω —Ü—É—Å—Ç–∞–π –∞–º—å—Ç–∞–Ω" },
      { word: "—Å–æ–ª–æ–Ω–≥–æ", hint: "“Æ–∑—ç–≥–¥—ç–ª" },
      { word: "—É—Ç–∞–∞", hint: "–£–ª–∞–∞–Ω–±–∞–∞—Ç—Ä—ã–Ω ”©–≤”©–ª" },
      { word: "—Ç–æ—Å–¥–æ–Ω–æ", hint: "–ê–∂–∏–ª —Ö–∏–π–≤—ç–ª –∞–º ..." },
      { word: "–Ω“Ø–¥", hint: "–ë–∏–µ–∏–π–Ω —Ö—ç—Å—ç–≥" },
      { word: "—á–∏—Ö", hint: "–ë–∏–µ–∏–π–Ω —Ö—ç—Å—ç–≥" },
       { word: "–º–∞–ª–≥–∞–π", hint: "–•—É–≤—Ü–∞—Å" },
      { word: "–±—É–Ω–¥–∞–Ω", hint: "–•”©–∑”©—Ä" },
      { word: "—Ö–∞–¥–∞–∞—Å", hint: "–ë–∞—Ä–∏–ª–≥—ã–Ω –º–∞—Ç–µ—Ä–∏–∞–ª" },
      { word: "–∞–ª–º–∞–∑", hint: "–ñ–∏–∂–∏–≥—Ö—ç–Ω —Ç—É—Å–º–∞–∞ “Ø–Ω—ç—Ç—ç–π" },
      { word: "–∑–∞—Ö—Ç–∞–π", hint: "–•“Ø–Ω –∞—Ö—Ç–∞–π –¥—ç—ç–ª" },
      { word: "–Ω—É—Ä—É—É", hint: "–¢—É–ª–≥—É—É—Ä —ç—Ä—Ö—Ç—ç–Ω" },
       { word: "—Å–∞—Ä", hint: "–ú”©—Å”©–Ω –¥—ç—ç—Ä –º”©–Ω–≥”©–Ω –∞—è–≥–∞" },
      { word: "–∂–∞–≤—Ö–ª–∞–Ω", hint: "–ò–¢“Æ –æ—Ä–¥–æ–≥ –±–∞–≥—à–∏–π–Ω –Ω—ç—Ä" },
      { word: "–Ω–∞—Ä", hint: "—Ç–æ–º –æ–¥" },
      { word: "–¥”©—Ä”©–≤", hint: "—Ç–æ–æ" },
       { word: "–¥–æ–ª–ª–∞—Ä", hint: "–ú”©–Ω–≥”©–Ω –¥—ç–≤—Å–≥—ç—Ä—Ç" },
      { word: "—Ö–∞–≤–∞—Ä", hint: "—É–ª–∏—Ä–∞–ª" },
      { word: "—à–∞—Ä", hint: "”©–Ω–≥”©" }
    ];

    let currentWord = "";
    let guessedLetters = [];
    let score = 0;
    let timer = null;
    let timeLeft = 60;
    let mistakeCount = 0;
    const maxMistakes = 4;

    function getCookie(name) {
      const value = document.cookie.split("; ").find(row => row.startsWith(name + "="));
      return value ? value.split("=")[1] : null;
    }

    function startGame() {
      const nickname = document.getElementById('nickname').value.trim();
      if (!nickname) return alert('–ù—ç—Ä—ç—ç –æ—Ä—É—É–ª–Ω–∞ —É—É');
      document.cookie = `nickname=${nickname}`;
      document.getElementById('nicknameInput').style.display = 'none';
      document.getElementById('gameArea').style.display = 'block';
      score = 0;
      document.getElementById('score').innerText = `–û–Ω–æ–æ: ${score}`;
      startTimer();
      loadNewWord();
    }

    function startTimer() {
      timeLeft = 60;
      document.getElementById('timer').innerText = `–¶–∞–≥: ${timeLeft}`;
      timer = setInterval(() => {
        timeLeft--;
        document.getElementById('timer').innerText = `–¶–∞–≥: ${timeLeft}`;
        if (timeLeft <= 0) {
          clearInterval(timer);
          showGameOver();
        }
      }, 1000);
    }

   function loadNewWord() {
    clearInterval(timer);  // ”®–º–Ω”©—Ö —Ü–∞–≥–∏–π–≥ –∑–æ–≥—Å–æ–æ–Ω–æ
    clearCanvas();
    drawGallows();

    guessedLetters = [];
    mistakeCount = 0;

    const random = words[Math.floor(Math.random() * words.length)];
    currentWord = random.word;
    document.getElementById('hint').innerText = `–°—ç–∂“Ø“Ø—Ä: ${random.hint}`;
    renderWord();
    renderKeyboard();

    timeLeft = 60;  // –•—É–≥–∞—Ü–∞–∞–≥ –¥–∞—Ö–∏–Ω 60 —Å–µ–∫—É–Ω–¥—ç—ç—Å —ç—Ö–ª“Ø“Ø–ª–Ω—ç
    document.getElementById('timer').innerText = `–¶–∞–≥: ${timeLeft}`;
    timer = setInterval(() => {
        timeLeft--;
        document.getElementById('timer').innerText = `–¶–∞–≥: ${timeLeft}`;
        if (timeLeft <= 0) {
            clearInterval(timer);  // –•—É–≥–∞—Ü–∞–∞ –¥—É—É—Å–∞—Ö–∞–¥
            showGameOver();  // –¢–æ–≥–ª–æ–≥—á —Ö–æ–∂–∏–≥–¥–ª–æ–æ –≥—ç–∂ “Ø–∑–Ω—ç–ø
        }
    }, 1000);
}
function handleGuess(letter) {
    guessedLetters.push(letter);
    renderWord();
    renderKeyboard();

    if (currentWord.includes(letter)) {
        score++;
        document.getElementById('score').innerText = `–û–Ω–æ–æ: ${score}`;
        const allGuessed = currentWord.split('').every(l => guessedLetters.includes(l));
        if (allGuessed) {
            setTimeout(() => {
                loadNewWord();  // 2 —Å–µ–∫—É–Ω–¥ —Ö“Ø–ª—ç—ç–≥—ç—ç–¥ –¥–∞—Ä–∞–∞–≥–∏–π–Ω “Ø–≥
            }, 2000);
        }
    } else {
        mistakeCount++;
        updateCanvas();  // Canvas –¥—ç—ç—Ä –∑—É—Ä–∞–≥–¥–∞—Ö —Ö—ç—Å–≥–∏–π–≥ –∑—É—Ä–Ω–∞

    
if (mistakeCount >= maxMistakes) {
  clearInterval(timer);
  setTimeout(() => {
    showGameOver();
  }, 2000); // canvas –∑—É—Ä–∞–≥–¥–∞—Ö–∞–¥ –∂–∞–∞—Ö–∞–Ω —Ö—É–≥–∞—Ü–∞–∞ ”©–≥—á –±–∞–π–Ω–∞
}

            
    }
}


    function renderWord() {
      const wordDiv = document.getElementById('word');
      wordDiv.innerHTML = '';
      for (const char of currentWord) {
        const span = document.createElement('span');
        span.className = 'letter-box';
        span.innerText = guessedLetters.includes(char) ? char : '';
        wordDiv.appendChild(span);
      }
    }

    function renderKeyboard() {
      const keyboard = document.getElementById('keyboard');
      keyboard.innerHTML = '';
      const layout = ['—Ñ—Ü—É–∂—ç–Ω–≥—à“Ø–∑–∫—ä–µ', '–π—ã–±”©–∞—Ö—Ä–æ–ª–¥–ø', '—è—á—ë—Å–º–∏—Ç—å–≤—é—â'];
      for (const row of layout) {
        const rowDiv = document.createElement('div');
        rowDiv.classList.add('keyboard-row');
        for (const letter of row) {
          const btn = document.createElement('button');
          btn.innerText = letter;
          btn.disabled = guessedLetters.includes(letter);
          btn.onclick = () => handleGuess(letter);
          rowDiv.appendChild(btn);
        }
        keyboard.appendChild(rowDiv);
      }
    }

    function handleGuess(letter) {
      guessedLetters.push(letter);
      renderWord();
      renderKeyboard();

      if (currentWord.includes(letter)) {
        score++;
        document.getElementById('score').innerText = `–û–Ω–æ–æ: ${score}`;
        const allGuessed = currentWord.split('').every(l => guessedLetters.includes(l));
        if (allGuessed) {
          showSuccessGifAndNextWord();
        }
      } else {
        mistakeCount++;
        updateCanvas();
        if (mistakeCount >= maxMistakes) {
          clearInterval(timer);
          showGameOver();

        }
      }
    }

    function showSuccessGifAndNextWord() {
      const wordDiv = document.getElementById('word');
      wordDiv.innerHTML += `<br><img src="rainbow.gif" width="300" />`;
      setTimeout(() => {
        loadNewWord();
      }, 2000);
    }

    function clearCanvas() {
      const canvas = document.getElementById('hangmanCanvas');
      const ctx = canvas.getContext('2d');
      ctx.clearRect(0, 0, canvas.width, canvas.height);
    }

    function drawGallows() {
      const ctx = document.getElementById('hangmanCanvas').getContext('2d');
      ctx.strokeStyle = 'black'; ctx.lineWidth = 3;
      ctx.beginPath(); ctx.moveTo(20, 230); ctx.lineTo(180, 230); ctx.stroke();
      ctx.beginPath(); ctx.moveTo(60, 230); ctx.lineTo(60, 20); ctx.stroke();
      ctx.beginPath(); ctx.moveTo(60, 20); ctx.lineTo(100, 20); ctx.stroke();
      ctx.beginPath(); ctx.moveTo(100, 20); ctx.lineTo(100, 40); ctx.stroke();
    }

    function updateCanvas() {
      const ctx = document.getElementById('hangmanCanvas').getContext('2d');
      ctx.strokeStyle = 'red'; ctx.lineWidth = 2;
      switch(mistakeCount) {
        case 1: ctx.beginPath(); ctx.arc(100, 60, 20, 0, Math.PI * 2); ctx.stroke(); break;
        case 2: ctx.beginPath(); ctx.moveTo(100, 80); ctx.lineTo(100, 120); ctx.stroke(); break;
        case 3:
          ctx.beginPath(); ctx.moveTo(100, 80); ctx.lineTo(80, 100); ctx.stroke();
          ctx.beginPath(); ctx.moveTo(100, 80); ctx.lineTo(120, 100); ctx.stroke();
          break;
        case 4:
          ctx.beginPath(); ctx.moveTo(100, 120); ctx.lineTo(80, 150); ctx.stroke();
          ctx.beginPath(); ctx.moveTo(100, 120); ctx.lineTo(120, 150); ctx.stroke();

      break;
      
      }
    }

   function showGameOver() {
  document.getElementById("revealWord").innerText = `–ó”©–≤ “Ø–≥: ${currentWord}`;

  const isTop5 = saveScoreToLocalStorage(); // –û–Ω–æ–æ–≥ —Ö–∞–¥–≥–∞–ª–∞–∞–¥ top 5 —à–∞–ª–≥–∞—Ö

  // –•—ç—Ä–≤—ç—ç top 5-–¥ –æ—Ä—Å–æ–Ω –±–æ–ª –º–µ—Å—Å–µ–∂ —Ö–∞—Ä—É—É–ª–∞—Ö
  const top5Msg = document.getElementById("top5Message");
  if (isTop5) {
    top5Msg.style.display = "block";
  } else {
    top5Msg.style.display = "none";
  }

  // Game over –º–æ–¥–∞–ª—ã–≥ —Ö–∞—Ä–∞–≥–¥—É—É–ª–Ω–∞
  document.getElementById("gameOverModal").style.display = "flex";
}


    function restartGame() {
      document.getElementById("gameOverModal").style.display = "none";
      score = 0;
      document.getElementById('score').innerText = `–û–Ω–æ–æ: ${score}`;
      startTimer();
      loadNewWord();
    }

    function exitGame() {
      location.reload();
    }

   function saveScoreToLocalStorage() {
  const nickname = getCookie("nickname") || "–¢–æ–≥–ª–æ–≥—á";
  let scores = JSON.parse(localStorage.getItem("hangmanTopScores")) || [];

  const existing = scores.findIndex(entry => entry.name === nickname);
  if (existing !== -1) {
    if (score > scores[existing].score) scores[existing].score = score;
  } else {
    scores.push({ name: nickname, score: score });
  }

  scores.sort((a, b) => b.score - a.score);
  scores = scores.slice(0, 10);
  localStorage.setItem("hangmanTopScores", JSON.stringify(scores));

  // ‚úî –¢–æ–ø 5-–¥ –æ—Ä—Å–æ–Ω —ç—Å—ç—Ö–∏–π–≥ —à–∞–ª–≥–∞—Ö
  const top5 = scores.slice(0, 5);
  const isTop5 = top5.some(entry => entry.name === nickname);
  return isTop5;
}


    function showTop10() {
      const list = document.getElementById("scoreboardList");
      list.innerHTML = '';
      const scores = JSON.parse(localStorage.getItem("hangmanTopScores")) || [];
      scores.forEach(entry => {
        const li = document.createElement("li");
        li.innerText = `${entry.name}: ${entry.score} –æ–Ω–æ–æ`;
        list.appendChild(li);
      });
      document.getElementById("top10Modal").style.display = "flex";
    }

    function closeTop10() {
      document.getElementById("top10Modal").style.display = "none";
    }
  </script>
</body>
</html>
